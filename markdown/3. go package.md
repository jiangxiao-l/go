# 3. go  packages

## 1. 介绍

```
包（package）是多个GO源码的集合，是一种高级的代码复用方案，GO语言为我们提供了很多的内置的包 如：fmt、os、io
```

## 2. 定义

```
一个包可以简单理解为一个存放.go 文件的文件夹。该文件夹下面的所有的go文件都要在代码的第一行添加 如下代码，声明该文件归宿的包.
package 包名

注意事项：
   一个文件夹下面直接包含的文件只能归宿一个package，同样一个package的文件不能在多个文件夹下
   包名可以不和文件夹的名字一样，包名不能包含 - 符号
   包名为main的包为应用程序的入口包，这种包编译后会得到一个可执行的文件，而编译不包含main包的源代码则不会得到可执文件
```

## 3. 可见性

```
如果想一个包中引用另外一个包里面的标识符（变量、常亮、类型、函数）时，该标识符必须对外可见的(public)。
在GO语言中只需要将标识符的首字母大写就可以让标识符对外可见了。
```

```go
package pkg2

import "fmt"

// 包变量可见性

var a = 100 // 首字母小写，外部包不可见，只能在当前包内使用

// 首字母大写外部包可见，可在其他包中使用
const Mode = 1

type person struct { // 首字母小写，外部包不可见，只能在当前包内使用
	name string
}

// 首字母大写，外部包可见，可在其他包中使用
func Add(x, y int) int {
	return x + y
}

func age() { // 首字母小写，外部包不可见，只能在当前包内使用
	var Age = 18 // 函数局部变量，外部包不可见，只能在当前函数内使用
	fmt.Println(Age)
}
```

```go
// 结构体中的字段和接口中的方法名 如果首字母都是大写，外部包可以访问这些字字段的方法。

type Student struct {
Name  string //可在包外访问的方法
class string //仅限包内访问的字段
}

type Payer interface {
init() //仅限包内访问的方法
Pay()  //可在包外访问的方法
}
```

## 4. 包的导入

### 4.1 单行导入

```go
import "包名"
```

### 4.2 多行导入

```go
import（
"package1"
"package2"
）
```

### 4.3 自定义包名

```go
import 别名 "package"
```

### 4.4 匿名导入包

```go
// 如果只希望导入包，而不适用包内部的数据时，可以使用匿名导入包。 一般和 init()函数一起使用
import _ "package"
```

### 4.5  init 函数

```go
//1.  在GO语言程序执行时导入包语句会自动触发内部的init函数的调用。
//2.  需要注意的是：init函数没有参数，也没有返回值。。
//3.  init 函数在程序运行时自动被调用执行，不能在代码中调用他。
//4.  包初始化执行的顺序如下图所以： 全局声明 ---> init() ---> main()
```

### 4.5.1 init函数执行的顺序

```
Go 语言包会从main包开始检查其导入包的所有包，每个包中又可以导入其他的包。。GO编译器由此构建出一个树状的包引用的关系。。在根据引用顺序决定编译顺序，依次编译这些包的代码。。

mian -- import --> A -- import --> B -- import --> C

c.init --> b.init() --> a.init() --> main.init()
```

